<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <link rel="stylesheet" href="style/quiz.css">
    <script src="js/questoes.js"></script>
</head>

<body onload="onloadEsconder()">

    <div class="container">

        <!-- Barra lateral -->
        <div id="barra_lateral">

            <div id="lat_red"></div>
            <div id="lat_white"></div>

            <div id="lat_black">

                <img id="logotipo" src="assets/icons/logotipo.png">

                <div id="botoes_nav">

                    <div id="perfil">

                        <img class="img_lat" src="assets/icons/user.png">
                        <a href="perfil.html">Perfil</a>

                    </div>


                    <div id="quiz">

                        <img class="img_lat" src="assets/icons/quiz.png">
                        <a href="quiz.html">Quiz</a>

                    </div>


                    <div id="dash">

                        <img class="img_lat" src="assets/icons/dashboard.png">
                        <a href="dashboard.html">Dashboard</a>

                    </div>

                </div>

                <div id="sair">

                    <img class="img_lat" src="assets/icons/exit.png">
                    <a href="home.html">Sair</a>

                </div>

            </div>

        </div>

        <!-- Conteúdo do quiz -->

        <div id="pontuacaoEJogo">

            <!-- Tela inicial do quiz -->

            <div id="tela_inicial">

                <p id="titulo_inicial">SEJA BEM VINDO(A)!</p>

                <p id="texto_inicial">A seguir você irá se deparar com um quiz contendo uma variação de perguntas à
                    respeito do maior clube do mundo: <span>São Paulo Futebol Clube</span>. Será que você realmente
                    conhece esse clube? É o que veremos. Quando estiver preparado, clique no botão abaixo “Iniciar
                    Quiz”.</p>

                <button id="btnIniciarQuiz" onclick="iniciarQuiz()">Iniciar quiz</button>

            </div>

            <!-- Questões do quiz -->

            <div id="questoes">

                <p id="titulo_questao">Questão <span>0</span></p>

                <div id="questao_atual">

                    <p id="numQuestao_atual">0</p>
                    <p>/</p>
                    <p id="total_questoes">10</p>

                </div>

                <div id="conteudo_principal">

                    <div id="alternativas">

                        <!-- Alternativa 1 -->
                        <div class="card_alternativa" id="primeiraOpcao">

                            <p>teste</p>

                        </div>

                        <!-- Alternativa 2 -->
                        <div class="card_alternativa" id="segundaOpcao">

                            <p>teste</p>

                        </div>

                        <!-- Alternativa 3 -->
                        <div class="card_alternativa" id="terceiraOpcao">

                            <p>teste</p>

                        </div>

                        <!-- Alternativa 4 -->
                        <div class="card_alternativa" id="quartaOpcao">

                            <p>teste</p>

                        </div>

                        <!-- Alternativa 5 -->
                        <div class="card_alternativa" id="quintaOpcao">

                            <p>teste</p>

                        </div>

                        <!-- Alternativa 6 -->
                        <div class="card_alternativa" id="sextaOpcao">

                            <p>teste</p>

                        </div>

                    </div>

                    <div id="botoes_laterais">

                        <p id="enunciado_questao"><span>0</span> - Qual foi o ano de fundação do São Paulo FC?</p>

                        <button onclick="confirmar()" id="btn_questao">Confirmar</button>
                        <button onclick="proximaPergunta()" id="btn_questao">Próxima pergunta</button>

                    </div>

                </div>

            </div>

            <!-- Resultados do quiz -->

            <div id="resultados_quiz">

                <div id="card_resultado">

                    <p id="titulo_resultado">Resultados</p>

                    <div id="acertos">

                        <p id="txt_acertos">Acertos</p>

                        <div id="acertos_questoes">

                            <p id="num_acertos">0</p>
                            <p>/</p>
                            <p id="qtd_questoes">0</p>

                        </div>

                    </div>

                </div>

                <p id="resposta_resultado">É... que pena. Parece que você não conhece tão bem o São Paulo Futebol Clube.
                    Mas não desanime. Realize uma nova tentativa e supere a si mesmo na próxima vez.</p>

                <button onclick="tentarNovamente()" id="btn_tentar_novamente">Tentar Novamente</button>

            </div>

        </div>

    </div>

</body>

</html>

<script>

    // Questões estão no arquivo 'questoes.js'

    // Variáveis auxiliares
    var indiceAtualQuestao = 0;
    var acertos = 0;
    var alternativaSelecionada = -1;

    // Função para inicializar o quiz, ocultando as outras telas
    function iniciarQuiz() {
        document.getElementById('tela_inicial').style.display = "none";
        document.getElementById('resultados_quiz').style.display = "none";
        document.getElementById('questoes').style.display = "flex";
        mostrarPergunta(indiceAtualQuestao);
    }

    // Função para mostrar os dados referentes a questão (Nº da questão, enunciado, alternativas)
    function mostrarPergunta(i) {
        document.getElementById('titulo_questao').innerHTML = `Questão ${i+1}`
        document.getElementById('numQuestao_atual').innerHTML = `${i+1}`;
        document.getElementById('total_questoes').innerHTML = questoes.length;
        document.getElementById('enunciado_questao').innerHTML = `${i+1} - ${questoes[i].pergunta}`;

        var alternativa = document.getElementById('alternativas').children;

        for (var j = 0; j < alternativa.length; j++) {
            alternativa[j].style.backgroundColor = "#FFFFFF";
            alternativa[j].style.color = "#121212";
            alternativa[j].innerHTML = `${questoes[i].alternativas[j]}`;
        }

        alternativaSelecionada = -1;

        for (var k = 0; k < alternativa.length; k++) {
            alternativa[k].onclick = (function (index) {
                return function () {
                    selecionarAlternativa(index);
                }
            })(k);
        }

        var btnConfirmar = document.getElementById('btn_questao');
        var btnProxima = btnConfirmar.nextElementSibling;

        btnConfirmar.style.display = "inline-block";
        btnConfirmar.innerHTML = "Confirmar";
        btnConfirmar.disabled = false;
        btnConfirmar.onclick = confirmar;

        btnProxima.style.display = "inline-block";
        btnProxima.innerHTML = "Próxima Pergunta";
        btnProxima.disabled = true;
        btnProxima.onclick = proximaPergunta;

        if (indiceAtualQuestao == questoes.length - 1) {
            btnProxima.innerHTML = "Finalizar Quiz";
        }
    }

    // Função para preecher a alternativa selecionada com uma cor de destaque
    function selecionarAlternativa(i) {
        var alternativa = document.getElementById('alternativas').children;

        for (var j = 0; j < alternativa.length; j++) {
            alternativa[j].style.backgroundColor = "#FFFFFF";
            alternativa[j].style.color = "#121212";
        }

        alternativa[i].style.backgroundColor = "#918e8e";
        alternativa[i].style.color = "#FFFFFF";

        alternativaSelecionada = i;
    }

    // Função para verificar se o usuário selecionou alguma alternativa e se essa alternativa está correta
    function confirmar() {
        if (alternativaSelecionada == -1) {
            alert("Por favor, selecione uma alternativa antes de confirmar.");
            return;
        }

        var alternativa = document.getElementById('alternativas').children;

        if (alternativaSelecionada == questoes[indiceAtualQuestao].correta) {
            acertos++;
            alternativa[alternativaSelecionada].style.backgroundColor = "green";
            alternativa[alternativaSelecionada].style.color = "white";
        } else {
            alternativa[alternativaSelecionada].style.backgroundColor = "#BC0909";
            alternativa[alternativaSelecionada].style.color = "white";
            alternativa[questoes[indiceAtualQuestao].correta].style.backgroundColor = "green";
            alternativa[questoes[indiceAtualQuestao].correta].style.color = "white";
        }

        for (var j = 0; j < alternativa.length; j++) {
            alternativa[j].onclick = null;
        }

        var btnConfirmar = document.getElementById('btn_questao');
        var btnProxima = btnConfirmar.nextElementSibling;

        btnConfirmar.disabled = true; 
        btnProxima.disabled = false; 
    }

    // Função para acessar a próxima questão
    function proximaPergunta() {
        indiceAtualQuestao++;

        if (indiceAtualQuestao < questoes.length) {
            mostrarPergunta(indiceAtualQuestao);
        } else {
            mostrarResultados();
        }
    }

    // Função para mostrar os resultados do usuário no quiz
    function mostrarResultados() {
        document.getElementById('questoes').style.display = "none";
        document.getElementById('resultados_quiz').style.display = "flex";

        document.getElementById('num_acertos').innerHTML = acertos;
        document.getElementById('qtd_questoes').innerHTML = questoes.length;

        var textoResultado = document.getElementById('resposta_resultado');

        if (acertos == questoes.length) {
            textoResultado.innerHTML = `Parabéns! Você conhece muito bem o São Paulo Futebol Clube!`;
        } else if (acertos >= 7) {
            textoResultado.innerHTML = `Muito bom! Você acertou ${acertos} questões. Continue estudando sobre o São Paulo FC.`
        } else {
            textoResultado.innerHTML = `É... que pena. Parece que você não conhece tão bem o São Paulo Futebol Clube. Mas não desanime. Realize uma nova tentativa e supere a si mesmo na próxima vez.`
        }
    }

    // Função para o usuário iniciar uma nova tentativa
    function tentarNovamente() {
        window.location.reload();
    }

    // Função que exibe apenas a tela inicial quando o quiz é aberto
    function onloadEsconder() {
        document.getElementById('tela_inicial').style.display = "flex";
        document.getElementById('questoes').style.display = "none";
        document.getElementById('resultados_quiz').style.display = "none";
    }


</script>