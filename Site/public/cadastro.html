<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/cadastro.css">
    <script src="js/validacoes.js"></script>
    <title>login</title>
</head>

<body>

    <!-- Navbar -->
    <div class="navbar_geral">

        <div class="nav_red"></div>
        <div class="nav_white"></div>

        <div class="nav_black">

            <img src="assets/icons/logotipo.png">

            <div class="botoes_nav">

                <a href="index.html" class="home_nav">Home</a>
                <a href="clube.html" class="clube_nav">Clube</a>
                <a href="sobreMim.html" class="sobre_mim_nav">Sobre mim</a>
                <a href="login.html" class="login_nav">Login</a>

            </div>

        </div>

    </div>


    <!-- Conteúdo -->
    <div class="container_cadastro">

            <div class="card_erro" id="cardErro">
                <span id="mensagem_erro"></span>
            </div>

        <div class="saudacao">

            <p id="titulo_saudacao">Seja Bem-Vindo!</p>

            <p id="txt_saudacao">Bem-vindo ao meu espaço dedicado ao São Paulo Futebol Clube! Aqui você encontrará tudo
                sobre a história, os títulos, os ídolos e a paixão que move milhões de torcedores. O São Paulo FC não é
                apenas um clube: é símbolo de tradição, conquistas e orgulho tricolor.</p>

        </div>

        <!-- Card Login -->
        <div class="card_cadastro">

            <p id="titulo_card">Cadastre-se</p>

            <p id="txt_email">Username</p>
            <div class="inputs_login_cadastro">
                <img src="assets/icons/username.png">
                <input type="text" id="input_username">
            </div>

            <p id="txt_email">Data de Nascimento</p>
            <div class="inputs_login_cadastro">
                <img src="assets/icons/data_nasc.png">
                <input type="date" id="input_dt_nascimento">
            </div>

            <p id="txt_email">E-mail</p>
            <div class="inputs_login_cadastro">
                <img src="assets/icons/email.png">
                <input type="text" id="input_email">
            </div>

            <p id="txt_senha">Senha</p>
            <div class="inputs_login_cadastro">
                <img src="assets/icons/senha.png">
                <input type="password" id="input_senha">
            </div>

            <p id="txt_email">Confirmação de senha</p>
            <div class="inputs_login_cadastro">
                <img src="assets/icons/senha.png">
                <input type="password" id="input_senha_confirm">
            </div>

            <button id="btn_cadastro" onclick="cadastrar()">Cadastro</button>

        </div>

    </div>

</body>

</html>

<script>

    function cadastrar() {

        var username = input_username.value
        var dtNascimento = input_dt_nascimento.value
        var email = input_email.value
        var senha = input_senha.value
        var confirm_senha = input_senha_confirm.value

        var msg_erro = validCadastro (username, dtNascimento, email, senha, confirm_senha)

        if (msg_erro) {
            
            cardErro.style.display = "block";
            mensagem_erro.innerHTML = `${msg_erro}`
            sumirErro()
            
        } else {

            fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                usernameServer: username,
                dtNascServer: dtNascimento,
                emailServer: email,
                senhaServer: senha
            }),
        })

            window.location.href = 'login.html'
        }

    }


</script>